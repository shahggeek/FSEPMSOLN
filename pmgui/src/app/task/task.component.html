<div class="container">
    <div class="row">
      <div class="col-md-6">
        <h3>Add Task</h3>
        <form (ngSubmit)="onAddTask(t)" #t="ngForm">
          <div id="task-data">
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="projectName"  style="width: 20.1%;">Project : </label>
                  <input type="text" id="projectName" class="form-control" name="projectName" [(ngModel)]="task.project.projectId">
                  <button type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-search"></span> Search
                  </button>
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="taskName"  style="width: 20.1%;">Task : </label>
                  <input type="text" id="taskName" class="form-control" name="taskName"  [(ngModel)]="task.taskName">
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <input #chkEnable ngModel type="checkbox"  id="isParent" class="form-control"  name="isParent" value="isParent">Parent Task
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="priority"  style="width: 20.1%;">Priority : </label>
                  <input [disabled]="chkEnable.checked" style="width: 55.1%;" type="range" id="priority" name="priority" min="1" max="30" value="0" step="1" oninput="priorityValue.value = priority.value"  [(ngModel)]="task.priority">
                  <output name="priorityValue" id="priorityValue">0</output>
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="parentId"  style="width: 20.1%;">Parent Task : </label>
                  <input type="text" [disabled]="chkEnable.checked"  id="parentId" class="form-control" name="parentId"  [(ngModel)]="task.parentTask.parentId">
                  <button type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-search"></span> Search
                  </button>
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="startDate"  style="width: 20.1%;">StartDate : </label>
                  <input type="date" [disabled]="chkEnable.checked" name="startDate" [(ngModel)]="task.startDate"/>
                  </div>
                  <div class="form-group form-inline" style="width: 100%;">
                    <label for="endDate"  style="width: 20.1%;">EndDate : </label>
                  <input type="date" [disabled]="chkEnable.checked" name="endDate" [(ngModel)]="task.endDate"/>
              </div>
              <div class="form-group form-inline" style="width: 100%;">
                  <label for="userId"  style="width: 20.1%;">User : </label>
                  <input type="text" id="userId" class="form-control" name="userId" [(ngModel)]="task.user.userId">
                  <button type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-search"></span> Search
                  </button>
              </div>
          </div>
          <div class="btn-toolbar">
            <button class="btn btn-primary" type="submit">Add Task</button>
            <button class="btn btn-primary" type="reset">Reset</button>
           </div>
        </form>
      </div>
    </div>

    <div class="table-responsive">
            <ng-container #outputAllTasks >
                <hr>
                <h3>All Tasks</h3>
                <table class="table table-bordered table-striped" id="taskstable">
                    <thead>
    
                    </thead>
                    <tbody>
                            <tr *ngFor="let task of tasks; let i = index">
                                    <ng-template [ngTemplateOutlet]="getTemplate(task)" 
                                    [ngTemplateOutletContext]="{ $implicit: task, index: i }"></ng-template>
                             </tr>
                    </tbody>
                </table>
            </ng-container>
            <ng-template #displayTmpl let-task>
                <td>{{task.taskName}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.endDate}}</td>
                <td>{{task.priority}}</td>
                <td>{{task.status}}</td>
                <td>
                    <div class="btn-toolbar">
                        <button  class="btn btn-warning" (click)="editTask(task)">Edit</button>
                        <button  class="btn btn-danger" (click)="deleteTask(task.taskId)">Delete</button>
                    </div>
                </td>
            </ng-template>
            
                <ng-template #editTmpl let-task>
                    <td><input type="text" [(ngModel)]="selected.taskName" /></td>
                    <td><input type="date" [(ngModel)]="selected.startDate" /></td>
                    <td><input type="date" [(ngModel)]="selected.endDate" /></td>
                    <td><input type="text" [(ngModel)]="selected.priority" /></td>
                    <td><input type="text" [(ngModel)]="selected.status" /></td>
                <td>
                    <div class="btn-toolbar">
                        <button  class="btn btn-success"  (click)="saveTask(task)">Save</button>
                        <button  class="btn btn-primary" (click)="resetTask()">Cancel</button>
                    </div>
                </td>
            </ng-template>
        </div>
</div>